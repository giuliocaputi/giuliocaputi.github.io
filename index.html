<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Giulio Caputi — Home</title>  <!-- Titolo del sito -->
  <link rel="icon" href="assets/img/giulio.jpg" type="image/jpeg">
  <link rel="apple-touch-icon" href="assets/img/giulio.jpg">
  <link rel="stylesheet" href="assets/main.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>
<body class="home bg-stars">
<div class="bg-twinkle-layer" aria-hidden="true"></div>

<!-- Loader Overlay -->
  <div id="loader" aria-hidden="true">
    <div class="loader-planet" role="img" aria-label="Loading">
      <div class="loader-ring"></div>
    </div>
    <div class="loader-percentage" aria-live="polite">0%</div>
  </div>
  <script>
  // Enhanced loader with percentage counter and smooth exit
  (function() {
    const loader = document.getElementById('loader');
    const percentageEl = document.querySelector('.loader-percentage');
    if (!loader || !percentageEl) return;

    let progress = 0;
    let isLoaded = false;

    function updateProgress() {
      if (!isLoaded) {
        const target = 90;
        const increment = (target - progress) * 0.08;
        progress = Math.min(progress + increment, target);
        percentageEl.textContent = Math.floor(progress) + '%';
        requestAnimationFrame(updateProgress);
      } else {
        if (progress < 100) {
          progress += (100 - progress) * 0.2;
          percentageEl.textContent = Math.floor(progress) + '%';

          if (progress > 99.5) {
            progress = 100;
            percentageEl.textContent = '100%';
            setTimeout(() => {
              loader.classList.add('fade');
              document.body.classList.add('content-reveal');
              setTimeout(() => loader.remove(), 800);
            }, 400);
          } else {
            requestAnimationFrame(updateProgress);
          }
        }
      }
    }

    updateProgress();

    window.addEventListener('load', () => {
      isLoaded = true;
    });
  })();
</script>

<script>
  // Hero text scramble effect - wait for DOM to be ready
  document.addEventListener('DOMContentLoaded', function(){
    const title = document.querySelector('.hero-title');
    const subtitle = document.querySelector('.hero-subtitle');
    if (!title || !subtitle) return;

    const titleText = title.dataset.text || '';
    const subtitleText = subtitle.dataset.text || '';
    const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$%&*';
    const scrambleDuration = 2000; // 2 seconds of scrambling
    const scrambleInterval = 50; // How fast the random letters change

    // Check for reduced motion preference
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (prefersReducedMotion) {
      title.textContent = titleText;
      subtitle.textContent = subtitleText;
      return;
    }

    function getRandomChar() {
      return chars[Math.floor(Math.random() * chars.length)];
    }

    function scrambleText(text) {
      return text.split('').map(char => char === ' ' ? ' ' : getRandomChar()).join('');
    }

    function animateScramble(element, finalText, duration) {
      let interval;

      // Start with scrambled text
      element.textContent = scrambleText(finalText);

      // Keep scrambling for the full duration
      interval = setInterval(() => {
        element.textContent = scrambleText(finalText);
      }, scrambleInterval);

      // After duration, reveal the correct text all at once
      setTimeout(() => {
        clearInterval(interval);
        element.textContent = finalText;
      }, duration);
    }

    function startScramble() {
      // Small delay to let the hero fade in first
      setTimeout(() => {
        // Start both animations together
        animateScramble(title, titleText, scrambleDuration);
        animateScramble(subtitle, subtitleText, scrambleDuration);
      }, 500);
    }

    // Watch for content-reveal class to be added to body
    const observer = new MutationObserver((mutations) => {
      mutations.forEach((mutation) => {
        if (mutation.type === 'attributes' && mutation.attributeName === 'class') {
          if (document.body.classList.contains('content-reveal')) {
            observer.disconnect();
            startScramble();
          }
        }
      });
    });

    observer.observe(document.body, { attributes: true });

    // Fallback if content-reveal is already present
    if (document.body.classList.contains('content-reveal')) {
      observer.disconnect();
      startScramble();
    }
  });
</script>

  <header class="header">
  <!-- LEFT: photo + brand -->
  <div class="left">
    <img class="avatar" src="assets/img/giulio.jpg" alt="Giulio Caputi">
    <div class="brand"><span class="dot"></span><span>Giulio Caputi</span></div>
  </div>

  <!-- CENTER (desktop/tablet only): inline nav -->
  <nav class="nav" aria-label="Primary">
    <a href="index.html" class="active" aria-current="page">Home</a>
    <a href="essentials.html">Essentials</a>
  </nav>

  <!-- RIGHT: Contact button + hamburger (mobile shows hamburger; desktop hides it) -->
  <div class="right">
    <a href="contact_me.html" class="btn-contact" role="button" aria-label="Contact Me">Contact Me</a>
    <button id="nav-toggle" class="hamburger" aria-label="Open menu" aria-controls="nav-drawer" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>
  </div>
</header>

<!-- Mobile menu overlay (hidden on desktop; opened by hamburger) -->
<div id="nav-backdrop" aria-hidden="true"></div>
<aside id="nav-drawer" aria-hidden="true" role="dialog" aria-label="Navigation menu">
  <div class="nav-panel">
    <button id="nav-close" class="nav-close" aria-label="Close navigation">×</button>
    <ul class="nav-list">
      <li><a href="index.html" aria-current="page">Home</a></li>
      <li><a href="essentials.html">Essentials</a></li>
    </ul>
  </div>
</aside>

  <main>

    <!-- Hero Section -->
    <section id="hero" class="hero-section" aria-label="Introduction">
      <div class="hero-content">
        <h1 class="hero-title" data-text="Giulio Caputi"></h1>
        <p class="hero-subtitle" data-text="Rumor has it they used to call him &quot;Cap&quot;"></p>
      </div>
    </section>

    <!-- Content Section -->
    <section class="content-section">
      <div class="wrap">

        <!-- Work Experience Section -->
        <section id="work" class="subsection" data-section="work">
          <div class="subsection-header">
            <div class="subsection-title-3d">
              <h2 class="subsection-title">Work Experience</h2>
              <p class="subsection-subtitle">Quant research at hedge fund, previously interned in big tech and cyber security</p>
            </div>
            <button class="subsection-toggle" aria-label="Toggle Work Experience details" aria-expanded="false">
              <span class="toggle-text toggle-text-explore">Explore</span>
              <span class="toggle-text toggle-text-close">Close</span>
              <i class="bi bi-chevron-down toggle-icon"></i>
            </button>
          </div>
          <div class="subsection-cards">
            <div class="grid">
              <article class="card" data-key="point72" tabindex="0" role="button" aria-label="Open details for Point72">
                <div class="age">age 22 onwards</div>
                <h3 class="title">
                  <span class="company">Point72</span>
                  <span class="role">Quantitative Researcher (Intern)</span>
                </h3>
                <div class="meta">London, UK</div>
                <div class="meta">Sep 2025 - present</div>
                <img class="logo" src="assets/img/point72_pink.png" alt="Point72 logo">
              </article>

              <article class="card" data-key="amazon" tabindex="0" role="button" aria-label="Open details for Amazon">
                <div class="age">age 20</div>
                <h3 class="title">
                  <span class="company">Amazon</span>
                  <span class="role">Business Intelligence Engineer (Intern)</span>
                </h3>
                <div class="meta">Luxembourg, Luxembourg</div>
                <div class="meta">Jun 2023 - Nov 2023 (6 months)</div>
                <img class="logo" src="assets/img/amazon_pink.png" alt="Amazon logo">
              </article>

              <article class="card" data-key="deloitte" tabindex="0" role="button" aria-label="Open details for Deloitte">
                <div class="age">age 20</div>
                <h3 class="title">
                  <span class="company">Deloitte</span>
                  <span class="role">Cyber Security Analyst (Intern)</span>
                </h3>
                <div class="meta">Milan, Italy</div>
                <div class="meta">Jan 2023 - Apr 2023 (3 months)</div>
                <img class="logo" src="assets/img/deloitte_pink.png" alt="Deloitte logo">
              </article>
            </div>
          </div>
        </section>

        <!-- Education Section -->
        <section id="education" class="subsection" data-section="education">
          <div class="subsection-header">
            <div class="subsection-title-3d">
              <h2 class="subsection-title">Education</h2>
              <p class="subsection-subtitle">MSc in Stats at Oxford, BSc in CS &amp; Econ at Bocconi, exchange at Georgia Tech</p>
            </div>
            <button class="subsection-toggle" aria-label="Toggle Education details" aria-expanded="false">
              <span class="toggle-text toggle-text-explore">Explore</span>
              <span class="toggle-text toggle-text-close">Close</span>
              <i class="bi bi-chevron-down toggle-icon"></i>
            </button>
          </div>
          <div class="subsection-cards">
            <div class="grid">
              <article class="card" data-key="oxford" tabindex="0" role="button" aria-label="Open details for Oxford">
                <div class="age">age 21-22</div>
                <h3 class="title">
                  <span class="company">University of Oxford</span>
                  <span class="role">MSc in Statistical Science</span>
                </h3>
                <div class="meta">Oxford, UK</div>
                <div class="meta">Sep 2024 - Sep 2025 (1 year)</div>
                <img class="logo" src="assets/img/oxford_pink.png" alt="Oxford logo">
              </article>

              <article class="card" data-key="bocconi" tabindex="0" role="button" aria-label="Open details for Bocconi University">
                <div class="age">age 18-21</div>
                <h3 class="title">
                  <span class="company">Bocconi University</span>
                  <span class="role">BSc in Computer Science &amp; Economics</span>
                </h3>
                <div class="meta">Milan, Italy</div>
                <div class="meta">Sep 2021 - Jul 2024 (3 years)</div>
                <img class="logo" src="assets/img/bocconi_pink.png" alt="Bocconi logo">
              </article>

              <article class="card" data-key="gatech" tabindex="0" role="button" aria-label="Open details for Georgia Tech">
                <div class="age">age 21</div>
                <h3 class="title">
                  <span class="company">Georgia Tech</span>
                  <span class="role">Exchange Semester</span>
                </h3>
                <div class="meta">Atlanta, USA</div>
                <div class="meta">Jan 2024 - May 2024 (4 months)</div>
                <img class="logo" src="assets/img/georgia_tech_pink.png" alt="Georgia Tech logo">
              </article>
            </div>
          </div>
        </section>

        <!-- Other Section -->
        <section id="other" class="subsection" data-section="other">
          <div class="subsection-header">
            <div class="subsection-title-3d">
              <h2 class="subsection-title">Other</h2>
              <p class="subsection-subtitle">Student association and other fun stuff</p>
            </div>
            <button class="subsection-toggle" aria-label="Toggle Other details" aria-expanded="false">
              <span class="toggle-text toggle-text-explore">Explore</span>
              <span class="toggle-text toggle-text-close">Close</span>
              <i class="bi bi-chevron-down toggle-icon"></i>
            </button>
          </div>
          <div class="subsection-cards">
            <div class="grid">
              <article class="card" data-key="bsml" tabindex="0" role="button" aria-label="Open details for BSML">
                <div class="age">age 20-21</div>
                <h3 class="title">
                  <span class="company">Bocconi Students for</span>
                  <span class="company">Machine Learning</span>
                  <span class="role">President &amp; Co-Founder</span>
                </h3>
                <div class="meta">Milan, Italy</div>
                <div class="meta">Jun 2023 - Jun 2024</div>
                <img class="logo" src="assets/img/bsml_pink.png" alt="BSML logo">
              </article>

              <article class="card" data-key="hobbies" tabindex="0" role="button" aria-label="Open details for Hobbies">
                <h3 class="title">
                  <span class="company">Hobbies</span>
                  <span class="role">Gym, music, websites,</span>
                  <span class="role">riddles, print-on-demand, books</span>
                </h3>
                <img class="logo" src="assets/img/hobbies_pink.png" alt="Hobbies">
              </article>

              <article class="card" data-key="cooking" tabindex="0" role="button" aria-label="Open details for Cooking">
                <h3 class="title">
                  <span class="company">Cooking</span>
                  <span class="role">...</span>
                </h3>
                <img class="logo" src="assets/img/question_mark_pink.png" alt="Cooking icon">
              </article>
            </div>
          </div>
        </section>

      </div>
    </section>
  </main>

  <!-- Detail Drawer -->
  <aside id="drawer" aria-hidden="true" role="dialog" aria-labelledby="drawer-title">
    <button id="drawer-close" aria-label="Close details">×</button>
    <h2 id="drawer-title">—</h2>
    <div class="drawer-meta">—</div>
    <div id="drawer-body" class="drawer-body"></div>
  </aside>
  <div id="drawer-backdrop" aria-hidden="true"></div>

  <script>
    // Detail content map
    const DETAILS = {
      point72: {
        title: "Point72 — Quantitative Researcher (Intern)",
        meta: "London, UK &nbsp;&nbsp; • &nbsp;&nbsp; <em>Sep 2025 – Mar 2026 (expected)</em>",
        body: `
        I'm performing alpha research in Point72's Internal Alpha Capture (IAC) team. I'm developing and 
        backtesting fully automated trading strategies with real-time signals coming from a variety of different 
        sources. 
        `
      },
      amazon: {
        title: "Amazon — Business Intelligence Engineer (Intern)",
        meta: "Luxembourg, Luxembourg &nbsp;&nbsp; • &nbsp;&nbsp; <em>Jun 2023 – Nov 2023</em>",
        body: `
        I applied Bayesian optimisation to improve the performance of database systems. These are complex 
        black-box programs, sometimes with 100+ inputs, whose main characteristic is that they are extremely 
        expensive to evaluate (a single run can take hours). This means brute-force or gradient-based approaches 
        aren’t practical. Bayesian optimisation is appealing here because it is derivative-free and uses 
        sample-efficient exploration. This became the core of my BSc thesis. The schedule wasn’t ideal: the 
        internship lasted six months; three of those overlapped with term time while I was in another country. 
        To make things more manageable, I sat only two exams that semester (still graduating in the first 
        session, <em>Cum Laude</em>).
        `
      },
      deloitte: {
        title: "Deloitte — Cyber Security Analyst (Intern)",
        meta: "Milan, Italy &nbsp;&nbsp; • &nbsp;&nbsp; <em>Jan 2023 – Apr 2023</em>",
        body: `
        I am a strong believer of the idea according to which everyone has to start somewhere. I started at
        Deloitte because consulting looked like a panoramic balcony: many companies from tons of different sectors hire
        consultants, so I figured I’d sample many industries before choosing my lane. Plot twist: this was false. I picked
        the most STEM-ish role I could find and did some stats/ML, but my real superpowers became Excel and PowerPoint.
        Totally useless. The upside: (i) clarity about what I don’t want to do, and (ii) a slightly improved CV and higher
        chances of getting in somewhere else. Also, pulling ~40 hours a week during my bachelor’s wasn’t exactly spa day, but
        that was probably the most valuable part.
        `
      },
      oxford: {
        title: "University of Oxford — MSc in Statistical Science",
        meta: "Oxford, UK &nbsp;&nbsp; • &nbsp;&nbsp; <em>Sep 2024 – Sep 2025</em>",
        body: `
        <a href="https://www.stats.ox.ac.uk/msc-statistical-science" target="_blank" rel="noopener" style="color: var(--accent-color, 
        var(--accent)); text-decoration: underline; text-underline-offset: 3px;">Official MSc page</a>


        I left the program with a solid, in-depth grounding in statistics and machine learning, in both theory and hands-on 
        work. Just as important, I met some of the brightest people I know and made great friends.
        

        My coursework included: Statistical Machine Learning, Advanced Statistical Machine Learning, Applied Statistics, 
        Computational Statistics, Foundations of Statistical Inference, Statistical Programming, Stochastic Models in Mathematical 
        Genetics, Graphical Models, and Advanced Simulation Methods.
        

        I wrote a dissertation titled “Equity Options Trading with Payoff-Aligned Asymmetric Loss: Methodology and Empirical 
        Validation”. In it, I explored ways to train predictive models with loss functions mirroring the payoff structure 
        of the option positions based on those models’ forecasts. I also ran extensive backtests.
        

        I’m still waiting for the final grade.
        `
      },
      bocconi: {
        title: "Bocconi University — BSc in Computer Science & Economics",
        meta: "Milan, Italy &nbsp;&nbsp; • &nbsp;&nbsp; <em>Sep 2021 – Jul 2024</em>",
        body: `
        <a href="https://www.unibocconi.it/en/programs/bachelor-science/economics-management-and-computer-science/study-plan" 
        target="_blank" rel="noopener" style="color: var(--accent-color, var(--accent)); text-decoration: underline; 
        text-underline-offset: 3px;">Official BSc page</a>

        
        This was a magnificent experience. I met some of my closest friends and learned to study with intent and passion, 
        graduating with 110 <em>Cum Laude</em>.


        My coursework included:
        Machine Learning, Finance, Computer Programming, Game Theory, Computer Science, Big Data, Applied 
        Mathematics, Statistics, Advanced Statistics, Microeconomics, Macroeconomics, IT Law, Econometrics.
        I definitely enjoyed the math/stats/CS classes more than the econ ones.


        My thesis, “Bayesian Optimization for Database Management”, grew out of my Amazon internship and explored 
        statistical techniques to improve the performance of Database Management Systems. Because the objective is a 
        complex, costly black box, I used Bayesian Optimization, which needs no derivatives. It fits a cheap 
        probabilistic surrogate to predict unseen values and maximizes an acquisition function to choose the next 
        evaluation point, i.e., a smart sampling that gathers data during tuning.

        
        At Bocconi I was part of some student associations before co-founding (and presiding over)
        <a href="https://bsmachinelearning.com/" target="_blank" rel="noopener" style="color: var(--accent-color, 
        var(--accent)); text-decoration: underline; text-underline-offset: 3px;">Bocconi Students for Machine 
        Learning</a>, together with some of my best friends.
        `
      },
      gatech: {
        title: "Georgia Institute of Technology — Exchange Semester",
        meta: "Atlanta, USA &nbsp;&nbsp; • &nbsp;&nbsp; <em>Jan 2024 – May 2024</em>",
        body: `
        I spent my final bachelor’s semester at Georgia Tech in Atlanta. As an exchange student, the pace eased 
        compared with a regular term, which gave me room to explore (on campus and across North America).


        Regarding academics, the relevant course I attended were Understanding Markets with Data Science, 
        Network Science, and Labor Economics, and I completed the semester with a 4.0/4.0 GPA.
        `
      },
      bsml: {
        title: "Bocconi Students for Machine Learning — President & Co‑Founder",
        meta: "Milan, Italy &nbsp;&nbsp; • &nbsp;&nbsp; <em>Jun 2023 – Jun 2024</em>",
        body: `
        <a href="https://bsmachinelearning.com/" target="_blank" rel="noopener" style="color: var(--accent-color, 
        var(--accent)); text-decoration: underline; text-underline-offset: 3px;">BSML website</a>


        BSML is Bocconi’s first student association dedicated to machine learning. We’re a strong community of problem-solvers who apply AI across disciplines–from finance, genetics and healthcare to real estate and sports betting.


        What we do:

        •⁠ Research & Publishing: Student-led projects exploring real-world machine learning applications, with results shared through papers and reports.

        •⁠ Events: Hackathons, workshops, and expert talks with leaders from academia and industry.

        •⁠ Transfer Learning Mentorship Program: Selected participants are matched 1:1 with a mentor active in their 
        area of interest. These areas include Quantitative Finance, Data Science, Machine Learning Research, Master’s 
        admissions, and PhD admissions. All mentors are current or former Bocconi students. I myself am a mentor in 
        the Quantitative Finance and Master’s Admissions areas. More info <a href="https://bsmachinelearning.com/transfer_learning.html" 
        target="_blank" rel="noopener" style="color: var(--accent-color, var(--accent)); text-decoration: underline; text-underline-offset: 3px;">here</a>.
        `
      },
      hobbies: {
        title: "Hobbies",
        meta: "",
        body: `
        I hit the gym 4x/week for strength and hypertrophy training and I listen to plenty of music (mainly trap/rap, 
        lo-fi, and contemporary classical, but I periodically explore new genres). I also love creating websites 
        (this one is the one I’m proudest of), and solving both logical and mathematical riddles (something I discovered 
        while preparing for interviews). In high school I created a fully automated print-on-demand <a href="https://www.redbubble.com/people/BabylonMerchant/shop" 
        target="_blank" rel="noopener" style="color: var(--accent-color, var(--accent)); text-decoration: underline; 
        text-underline-offset: 3px;">online shop</a>, and I occasionally still make some sells. Lastly, I 
        like reading books (mostly non-fiction, occasionally a novel).
        `
      },
      cooking: {
        title: "Cooking",
        meta: "",
        body: `
        Soon to be added.
        `
      }
    };

    const drawer = document.getElementById('drawer');
    const titleEl = document.getElementById('drawer-title');
    const metaEl = document.querySelector('.drawer-meta');
    const bodyEl = document.getElementById('drawer-body');
    const backdrop = document.getElementById('drawer-backdrop');
    const closeBtn = document.getElementById('drawer-close');

    function openDrawer(key){
      const d = DETAILS[key];
      if(!d) return;
      titleEl.textContent = d.title;
      metaEl.innerHTML = d.meta;
      bodyEl.innerHTML = d.body
        ? '<p>' + d.body.replace(/\n{2,}/g, '</p><p>') + '</p>'
        : d.bullets.map(b => '<p>'+b+'</p>').join('');
      drawer.setAttribute('aria-hidden', 'false');
      backdrop.setAttribute('aria-hidden', 'false');
      document.body.classList.add('drawer-open');
      closeBtn.focus();
    }
    function closeDrawer(){
      drawer.setAttribute('aria-hidden', 'true');
      backdrop.setAttribute('aria-hidden', 'true');
      document.body.classList.remove('drawer-open');
    }

    document.querySelectorAll('.card[data-key]').forEach(card => {
      card.addEventListener('click', () => openDrawer(card.dataset.key));
      card.addEventListener('keydown', (e) => { if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openDrawer(card.dataset.key); } });
    });
    backdrop.addEventListener('click', closeDrawer);
    closeBtn.addEventListener('click', closeDrawer);
    window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeDrawer(); });
  </script>


<!-- Avatar Lightbox (home page) -->
<div id="photo-lightbox" class="lightbox" aria-hidden="true" role="dialog" aria-label="Profile photo (enlarged)">
  <div class="lightbox__inner" role="document">
    <button id="photo-lightbox-close" class="lightbox__close" aria-label="Close enlarged photo">×</button>
    <img id="photo-lightbox-img" alt="Giulio Caputi">
  </div>
</div>

<!-- this opens and closes the navigation menu -->
<script>
  (function(){
    const toggle = document.getElementById('nav-toggle');
    const drawer = document.getElementById('nav-drawer');
    const backdrop = document.getElementById('nav-backdrop');
    const closeBtn = document.getElementById('nav-close');

    function openNav(){
      drawer.setAttribute('aria-hidden','false');
      backdrop.setAttribute('aria-hidden','false');
      document.body.classList.add('drawer-open');
      toggle.setAttribute('aria-expanded','true');
      closeBtn && closeBtn.focus();
    }
    function closeNav(){
      drawer.setAttribute('aria-hidden','true');
      backdrop.setAttribute('aria-hidden','true');
      document.body.classList.remove('drawer-open');
      toggle.setAttribute('aria-expanded','false');
      toggle && toggle.focus();
    }

    toggle && toggle.addEventListener('click', openNav);
    closeBtn && closeBtn.addEventListener('click', closeNav);
    backdrop && backdrop.addEventListener('click', closeNav);
    /* Close when clicking anywhere outside the panel (on the dimmed area) */
    drawer && drawer.addEventListener('click', (e)=>{ 
    if(!e.target.closest('.nav-panel')) closeNav(); });
    window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape'){ closeNav(); }});
  })();
</script>

<script>
  (function(){
    const avatar   = document.querySelector('.avatar');               // the small photo in header
    const lb       = document.getElementById('photo-lightbox');
    const lbImg    = document.getElementById('photo-lightbox-img');
    const lbClose  = document.getElementById('photo-lightbox-close');

    if(!avatar || !lb || !lbImg || !lbClose) return;

    // Make the image keyboard-accessible like a button
    avatar.setAttribute('tabindex','0');
    avatar.setAttribute('role','button');
    avatar.setAttribute('aria-label','Enlarge profile photo');

    function openLB(){
      // use currentSrc to respect any srcset, else fall back to src
      lbImg.src = avatar.currentSrc || avatar.src;
      lb.setAttribute('aria-hidden','false');
      document.body.classList.add('modal-open');
      lbClose.focus();
    }

    function closeLB(){
      lb.setAttribute('aria-hidden','true');
      document.body.classList.remove('modal-open');
      avatar.focus();
    }

    // Open on click or keyboard (Enter/Space)
    avatar.addEventListener('click', openLB);
    avatar.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' || e.key === ' '){
        e.preventDefault();
        openLB();
      }
    });

    // Close controls: button, click outside, ESC
    lbClose.addEventListener('click', closeLB);
    lb.addEventListener('click', (e)=>{ if(e.target === lb) closeLB(); });
    window.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeLB(); });
  })();
</script>

<footer class="site-footer footer">
  <div class="footer-inner">
    <div>
      <h2 class="footer-name">Giulio Caputi</h2>
      <p>London, United Kingdom</p>
      <p>Email: <a href="mailto:giulio.caputi@st-hughs.ox.ac.uk" target="_blank">giulio.caputi@st-hughs.ox.ac.uk</a></p>
      <p>© Copyright <strong>Giulio Caputi</strong> <span class="js-year"></span>. All Rights Reserved.</p>
    </div>

  <nav class="social-links social-tiles" aria-label="Social links">
  <a href="https://www.linkedin.com/in/giulio-caputi/" target="_blank" rel="noopener" title="LinkedIn">
    <i class="bi bi-linkedin" aria-hidden="true"></i>
  </a>
  <a href="https://www.instagram.com/giulio_caputi/" target="_blank" rel="noopener" title="Instagram">
    <i class="bi bi-instagram" aria-hidden="true"></i>
  </a>
</nav>

  
  </div>
</footer>

<script>
  document.querySelectorAll('.js-year').forEach(function(el){
    el.textContent = new Date().getFullYear();
  });
</script>

<!-- Scroll-to-top arrow -->
<a href="#" id="scroll-top" class="scroll-top" aria-label="Back to top" title="Back to top">
  <i class="bi bi-arrow-up-short" aria-hidden="true"></i>
</a>
<script>
  (function(){
    const btn = document.getElementById('scroll-top');
    if(!btn) return;
    const toggle = () => {
      const y = window.scrollY || document.documentElement.scrollTop;
      btn.classList.toggle('show', y > 150);
    };
    window.addEventListener('scroll', toggle, { passive: true });
    window.addEventListener('resize', toggle, { passive: true });
    toggle();
    btn.addEventListener('click', function(e){
      e.preventDefault();
      try{
        window.scrollTo({ top: 0, behavior: 'smooth' });
      }catch(_){
        window.scrollTo(0, 0);
      }
    });
  })();
</script>


<script>
  // Hero scroll behavior and content reveal with staggered card animations
  document.addEventListener('DOMContentLoaded', () => {
    const heroScroll = document.querySelector('.hero-scroll');
    const contentSection = document.querySelector('.content-section');

    // Smooth scroll to content when clicking the scroll indicator
    if (heroScroll && contentSection) {
      heroScroll.addEventListener('click', () => {
        contentSection.scrollIntoView({ behavior: 'smooth' });
      });
    }

    // Intersection Observer to reveal content section when it enters viewport
    if (contentSection) {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('visible');
          }
        });
      }, {
        threshold: 0.1,
        rootMargin: '0px 0px -100px 0px'
      });

      observer.observe(contentSection);
    }

    // Staggered reveal for individual cards
    const cards = document.querySelectorAll('.card');
    if (cards.length > 0) {
      const cardObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('card-visible');
            cardObserver.unobserve(entry.target);
          }
        });
      }, {
        threshold: 0.15,
        rootMargin: '0px 0px -80px 0px'
      });

      cards.forEach((card, index) => {
        card.style.transitionDelay = `${index * 0.08}s`;
        cardObserver.observe(card);
      });
    }

    // Parallax effect for hero section
    let ticking = false;
    window.addEventListener('scroll', () => {
      if (!ticking) {
        window.requestAnimationFrame(() => {
          const scrolled = window.scrollY;
          const heroSection = document.querySelector('.hero-section');

          if (heroSection && scrolled < window.innerHeight) {
            const heroContent = heroSection.querySelector('.hero-content');

            if (heroContent) {
              heroContent.style.transform = `translateY(${scrolled * 0.5}px)`;
              heroContent.style.opacity = 1 - (scrolled / window.innerHeight) * 1.5;
            }
          }

          ticking = false;
        });

        ticking = true;
      }
    }, { passive: true });

    // Section navigation active state tracking
    const sections = document.querySelectorAll('#hero, #work, #education, #other');
    const navItems = document.querySelectorAll('.section-nav-item');

    // Track which section is most visible
    function updateActiveSection() {
      const scrollTop = window.scrollY;
      const windowHeight = window.innerHeight;

      // If at the very top, select hero
      if (scrollTop < windowHeight * 0.3) {
        navItems.forEach(item => {
          item.classList.toggle('active', item.dataset.section === 'hero');
        });
        return;
      }

      // Find which section is most in view
      let bestSection = null;
      let bestVisibility = 0;

      sections.forEach(section => {
        const rect = section.getBoundingClientRect();
        const sectionTop = rect.top;
        const sectionBottom = rect.bottom;
        const sectionHeight = rect.height;

        // Calculate how much of the section is visible in the viewport
        const visibleTop = Math.max(0, sectionTop);
        const visibleBottom = Math.min(windowHeight, sectionBottom);
        const visibleHeight = Math.max(0, visibleBottom - visibleTop);
        const visibility = visibleHeight / Math.min(sectionHeight, windowHeight);

        // Prefer sections that are more centered in viewport
        const sectionCenter = (sectionTop + sectionBottom) / 2;
        const viewportCenter = windowHeight / 2;
        const centerBonus = 1 - Math.abs(sectionCenter - viewportCenter) / windowHeight;

        const score = visibility * 0.7 + centerBonus * 0.3;

        if (score > bestVisibility) {
          bestVisibility = score;
          bestSection = section.id;
        }
      });

      if (bestSection) {
        navItems.forEach(item => {
          item.classList.toggle('active', item.dataset.section === bestSection);
        });
      }
    }

    // Update on scroll
    window.addEventListener('scroll', updateActiveSection, { passive: true });
    updateActiveSection(); // Initial call

    // Smooth scroll on click with offset for header
    navItems.forEach(item => {
      item.addEventListener('click', (e) => {
        e.preventDefault();
        const targetId = item.getAttribute('href').substring(1);
        const targetSection = document.getElementById(targetId);

        if (targetSection) {
          // For hero, scroll to top; for others, add offset for header
          if (targetId === 'hero') {
            window.scrollTo({ top: 0, behavior: 'smooth' });
          } else {
            const headerOffset = 150; // Account for sticky header and some padding
            const elementPosition = targetSection.getBoundingClientRect().top + window.scrollY;
            const offsetPosition = elementPosition - headerOffset;
            window.scrollTo({ top: offsetPosition, behavior: 'smooth' });
          }

          // Immediately update active state
          navItems.forEach(nav => {
            nav.classList.toggle('active', nav.dataset.section === targetId);
          });
        }
      });
    });
  });

  // Subsection toggle functionality
  const allSubsections = document.querySelectorAll('.subsection');

  document.querySelectorAll('.subsection-toggle').forEach(button => {
    button.addEventListener('click', (e) => {
      e.stopPropagation(); // Prevent document click from immediately closing
      const subsection = button.closest('.subsection');
      const isExpanded = subsection.classList.contains('expanded');

      // Close all other subsections first
      allSubsections.forEach(other => {
        if (other !== subsection && other.classList.contains('expanded')) {
          other.classList.remove('expanded');
          other.querySelector('.subsection-toggle').setAttribute('aria-expanded', 'false');
        }
      });

      // Toggle the current subsection
      subsection.classList.toggle('expanded');
      button.setAttribute('aria-expanded', !isExpanded);
    });
  });

  // Close subsections when clicking outside
  document.addEventListener('click', (e) => {
    // Don't close if clicking inside a subsection, on a card, or on the drawer/backdrop
    if (e.target.closest('.subsection') ||
        e.target.closest('.card') ||
        e.target.closest('#drawer') ||
        e.target.closest('#drawer-backdrop') ||
        e.target.closest('#drawer-close')) return;

    // Close all expanded subsections
    allSubsections.forEach(subsection => {
      if (subsection.classList.contains('expanded')) {
        subsection.classList.remove('expanded');
        subsection.querySelector('.subsection-toggle').setAttribute('aria-expanded', 'false');
      }
    });
  });
</script>

<!-- Vertical Section Navigation (fixed to viewport) -->
<nav class="section-nav" aria-label="Page sections">
  <div class="section-nav-line"></div>
  <a href="#hero" class="section-nav-item active" data-section="hero">
    <span class="section-nav-dot"></span>
    <span class="section-nav-label">Intro</span>
  </a>
  <a href="#work" class="section-nav-item" data-section="work">
    <span class="section-nav-dot"></span>
    <span class="section-nav-label">Work Experience</span>
  </a>
  <a href="#education" class="section-nav-item" data-section="education">
    <span class="section-nav-dot"></span>
    <span class="section-nav-label">Education</span>
  </a>
  <a href="#other" class="section-nav-item" data-section="other">
    <span class="section-nav-dot"></span>
    <span class="section-nav-label">Other</span>
  </a>
</nav>

</body>
</html>
